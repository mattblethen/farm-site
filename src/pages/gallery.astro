---
import Base from "../layouts/Base.astro";
import Img from "../components/Img.astro";

// STATIC IMPORTS (Astro will generate optimized variants)
import pasture1Thumb from "../assets/gallery/pasture-1-600x400.png";
import pasture1Full from "../assets/gallery/pasture-1-1600x1067.png";
import pasture2Thumb from "../assets/gallery/pasture-2-600x400.png";
import pasture2Full from "../assets/gallery/pasture-2-1600x1067.png";
import herd1Thumb from "../assets/gallery/herd-1-600x400.png";
import herd1Full from "../assets/gallery/herd-1-1600x1067.png";
import processor1Thumb from "../assets/gallery/processor-1-600x400.png";
import processor1Full from "../assets/gallery/processor-1-1600x1067.png";
import packaging1Thumb from "../assets/gallery/packaging-1-600x400.png";
import packaging1Full from "../assets/gallery/packaging-1-1600x1067.png";
import freezer1Thumb from "../assets/gallery/freezer-1-600x400.png";
import freezer1Full from "../assets/gallery/freezer-1-1600x1067.png";

const SITE = { url: "https://example.com", name: "Pine Ridge Beef" };
const title = "Gallery — Pasture, Processing & Freezer | Pine Ridge Beef";
const description =
  "See our pasture, herd, and finished beef packaging. Realistic, transparent look at what to expect when you reserve a quarter, half, or whole share.";

// define once for mapping
const ITEMS = [
  { id: "pasture-1", alt: "Cattle grazing in green pasture at sunset", thumb: pasture1Thumb, full: pasture1Full },
  { id: "pasture-2", alt: "Rotational grazing paddock with temporary fencing", thumb: pasture2Thumb, full: pasture2Full },
  { id: "herd-1", alt: "Calm herd near a tree line with blue sky", thumb: herd1Thumb, full: herd1Full },
  { id: "processor-1", alt: "USDA processor exterior with loading bay", thumb: processor1Thumb, full: processor1Full },
  { id: "packaging-1", alt: "Vacuum-sealed steaks with clear labels", thumb: packaging1Thumb, full: packaging1Full },
  { id: "freezer-1", alt: "Chest freezer neatly organized with labeled packages", thumb: freezer1Thumb, full: freezer1Full },
];
---

<Base title={title} description={description} canonical={`${SITE.url}/gallery`}>
  <!-- SEO: Image gallery / ItemList -->
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "Pine Ridge Beef Gallery",
      "itemListElement": ITEMS.map((it, i) => ({
        "@type": "ImageObject",
        "position": i + 1,
        "contentUrl": new URL(it.full.src, SITE.url).toString(),
        "thumbnailUrl": new URL(it.thumb.src, SITE.url).toString(),
        "caption": it.alt,
      })),
    })}
  </script>

  <style>
    .lb { opacity:0; pointer-events:none; }
    .lb:target { opacity:1; pointer-events:auto; }
    .lb {
      position:fixed; inset:0; z-index:60;
      background:rgba(0,0,0,.8); overflow:hidden;
    }
    .lb__inner {
      min-height:100%; display:flex; align-items:center; justify-content:center;
      padding:4rem 1rem;
    }
    .lb__figure { width:min(90vw,1100px); }
    .lb__img {
      width:100%; height:auto; max-height:calc(100vh - 8rem);
      object-fit:contain; border-radius:.75rem;
      box-shadow:0 10px 30px rgba(0,0,0,.45);
      border:1px solid rgba(255,255,255,.1);
    }
    .lb__caption {
      color:rgba(255,255,255,.9); text-align:center;
      font-size:.95rem; margin-top:.75rem;
    }
    .lb__close {
      position:fixed; top:1rem; right:1rem;
      color:rgba(255,255,255,.9); font-size:2rem; text-decoration:none;
    }
    .lb__backdrop { position:fixed; inset:0; }
    .section Img {
      margin-top:0px;
      margin-bottom:0px;
      border-radius:0px;
    }
  </style>

  <section class="section">
    <div class="mx-auto max-w-[1200px] px-4 md:px-6">
      <h1 class="text-3xl md:text-5xl font-semibold">Gallery</h1>
      <p class="mt-4 text-lg max-w-2xl text-black/80">
        A look at our pasture, herd, and finished beef packaging—so you know exactly what to expect.
      </p>
    </div>
  </section>

  <!-- Grid -->
  <section class="section">
    <div class="mx-auto max-w-[1200px] px-4 md:px-6">
      <ul class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
        {ITEMS.map((it) => (
          <li class="group">
            <a href={`#${it.id}`} class="block rounded-xl overflow-hidden border border-black/10 bg-white">
              <Img
                src={it.thumb}
                alt={it.alt}
                sizes="(min-width:1024px) 31vw, (min-width:768px) 48vw, 100vw"
                widths={[320, 480, 600, 720]}
                quality={70}
                format="webp"
                class="w-full h-auto transition-transform duration-200 group-hover:scale-[1.02]"
              />
            </a>
          </li>
        ))}
      </ul>
    </div>
  </section>

  <!-- Lightboxes (CSS :target) -->
  {ITEMS.map((it) => (
    <div id={it.id} class="lb">
      <a href="#close" class="lb__backdrop" aria-label="Close lightbox"></a>
      <a href="#close" aria-label="Close" class="lb__close">×</a>
      <div class="lb__inner">
        <figure class="lb__figure">
          <Img
            src={it.full}
            alt={it.alt}
            sizes="(min-width:1024px) 90vw, 100vw"
            widths={[800, 1000, 1200, 1400, 1600]}
            quality={80}
            format="webp"
            class="lb__img"
          />
          <figcaption class="lb__caption">{it.alt}</figcaption>
        </figure>
      </div>
    </div>
  ))}
</Base>
